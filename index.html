<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Online Shopping Site for Mobiles, Electronics, Furniture, Grocery,
      Lifestyle, Books & More. Best Offers!
    </title>
    <link rel="icon" href="https://static-assets-web.flixcart.com/www/promos/new/20150528-140547-favicon-retina.ico"/>
    <link rel="stylesheet" href="./style/style.css" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet"/>
  </head>
  <body>
    <div class="navbar"></div>
    <div class="categories"></div>
    <div class="slideshow_container" id="slide1"></div>
    <div class="C_heading"><p>Travel</p></div>
    <div style="display: flex;">
      <ul class="slider1"></ul>
      <img src="https://rukminim1.flixcart.com/flap/464/708/image/a33323ee3a5b0bc5.jpg?q=70" class="banner"/>
    </div>
    <div class="C_heading"><p>Home Appliances</p></div>
    <ul class="slider2"></ul>
    <div class="C_heading"><p>Clothing</p></div>
    <ul class="slider3"></ul>
    <div class="flipkart_info"></div>
    <div class="foot"></div>
    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"
    ></script>
  </body>
</html>
<script type="module">
  import navbar from "./components/navbar.js";
  import slideshow from "./components/slideshow.js";
  import {categories} from "./components/categories.js";
  import {footer,Flipkartinfo} from "./components/footer.js";
  import {search,debounce,displayResults} from "./scripts/script.js";
  import {seggregate,showcarousel} from "./components/carousel.js";
// Navbar Functionality start
  let nbar = document.querySelector(".navbar");
  nbar.innerHTML = navbar();
  let more = document.querySelector(".more");
  let micon = document.getElementById("micon");
  more.onmouseenter = function(){
    micon.innerText = "arrow_drop_up";
  }
  more.onmouseleave = function(){
    micon.innerText = "arrow_drop_down";
  }
  let searchbar = document.getElementById("searchbox");
  let output = document.getElementById("output");
  searchbar.oninput = function(){
    debounce(search,1000);
  }
  // categories display
  let cat = document.querySelector(".categories");
  cat.innerHTML = categories();
  // Slideshow Functionality start
  let slideshowCont = document.getElementById("slide1");
  slideshowCont.innerHTML = slideshow();
  // page_info
  let info = document.querySelector(".flipkart_info")
  info.innerHTML = Flipkartinfo();
  // Footer 
  let foot = document.querySelector('.foot');
  foot.innerHTML = footer();
let slidePosition = 0;
let slides = document.getElementsByClassName("mySlides");
const totalslides = slides.length;

document.getElementById("next").addEventListener("click", function () {
  moveToNextSlide();
});
document.getElementById("prev").addEventListener("click", function () {
  moveToPrevSlide();
});

function moveToNextSlide() {
  if (slidePosition === totalslides - 1) {
    slidePosition = 0;
  } else {
    slidePosition++;
  }
  updateSlidePosition();
}
function moveToPrevSlide() {
  if (slidePosition === 0) {
    slidePosition = totalslides - 1;
  } else {
    slidePosition--;
  }
  updateSlidePosition();
}
function updateSlidePosition() {
  for (let slide of slides) {
    slide.classList.remove("mySlides--visible");
    slide.classList.add("mySlides--hidden");
  }
  slides[slidePosition].classList.add("mySlides--visible");
}
  // carousel functionality start
let slider1 = document.querySelector(".slider1");
  seggregate("travel",slider1);
  let slider2 = document.querySelector(".slider2");
  seggregate("homeappliances",slider2);
  let slider3 = document.querySelector(".slider3");
  seggregate("cloth",slider3);
  jQuery(document).ready(function($){
    function start_slick(x){
      if(x=='.slider1')
      {
        $(x).slick({
          dots: false,
          infinite: false,
          speed: 300,
          slidesToShow: 4,
          slidesToScroll: 1,
          prevArrow: `<span class = "material-icons prev-arrow">navigate_before</span>`,
          nextArrow: `<span class = "material-icons next-arrow">navigate_next</span>`,
          responsive: [
            {
              breakpoint: 1024,
              settings: {
                slidesToShow: 4,
                slidesToScroll: 3,
                infinite: false,
                dots: false
              }
            },
            {
              breakpoint: 600,
              settings: {
                slidesToShow: 2,
                slidesToScroll: 2
              }
            },
            {
              breakpoint: 480,
              settings: {
                slidesToShow: 1,
                slidesToScroll: 1
              }
            }
          ]
        });
      }
      else
      {
        $(x).slick({
          dots: false,
          infinite: false,
          speed: 300,
          slidesToShow: 5.5,
          slidesToScroll: 1,
          prevArrow: `<span class = "material-icons prev-arrow">navigate_before</span>`,
          nextArrow: `<span class = "material-icons next-arrow">navigate_next</span>`,
          responsive: [
            {
              breakpoint: 1024,
              settings: {
                slidesToShow: 5,
                slidesToScroll: 3,
                infinite: false,
                dots: false
              }
            },
            {
              breakpoint: 600,
              settings: {
                slidesToShow: 2,
                slidesToScroll: 2
              }
            },
            {
              breakpoint: 480,
              settings: {
                slidesToShow: 1,
                slidesToScroll: 1
              }
            }
          ]
        });
      }
    }
    window.setTimeout(()=>{
      start_slick('.slider1')}, 2000,);
    window.setTimeout(()=>{
    start_slick('.slider2')}, 2000,);
    window.setTimeout(()=>{
    start_slick('.slider3')}, 2000,);
});
let checkin = document.querySelector(".login");
let dropdown = document.querySelector(".login_dropdown");
if(localStorage.getItem("token"))
{
  checkin.innerText = JSON.parse(localStorage.getItem("token")).user.username;
  checkin.style.color= "white";
  let logindiv = document.querySelector(".login_div");
  logindiv.style.backgroundColor = "inherit";
  dropdown.innerHTML += `<li><span class="material-icons">power_settings_new</span>Logout</li>`;
  dropdown.lastChild.addEventListener("click",()=>{logout()});
  document.querySelector('.login_dropdown').removeChild(document.querySelector('.login_dropdown').getElementsByTagName('li')[0]);
  console.log(dropdown);
}
</script>
<script>
  
window.addEventListener('click',()=>{
  output.style.display = "none";
})


function logout(){
  console.log("you logoutted");
  localStorage.removeItem("token");
  location.reload();
}

</script>
